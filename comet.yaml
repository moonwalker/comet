stacks_dir: stacks
work_dir: stacks/_components
generate_backend: false

# Environment variables (plain values only, fast)
# Shell environment takes precedence
# env:
#   TF_LOG: DEBUG
#   AWS_REGION: us-west-2

# Bootstrap: One-time setup for secrets and dependencies
# Run 'comet bootstrap' to fetch and cache locally
# This makes all subsequent comet commands fast!
#
# bootstrap:
#   - name: sops-age-key
#     type: secret
#     source: op://vault/infrastructure/sops-age-key  # Your 1Password path
#     target: ~/.config/sops/age/keys.txt  # Automatically resolves to platform-specific path
#     mode: "0600"
#
#   # Note: For SOPS age keys, bootstrap automatically resolves the target path:
#   #   - macOS without XDG_CONFIG_HOME: ~/Library/Application Support/sops/age/keys.txt
#   #   - macOS with XDG_CONFIG_HOME: $XDG_CONFIG_HOME/sops/age/keys.txt
#   #   - Linux: ~/.config/sops/age/keys.txt (or $XDG_CONFIG_HOME if set)
#
#   # Optional: Check required tools
#   - name: check-tools
#     type: check
#     command: op,sops,tofu  # Comma-separated binary names
#
#   # Optional: Run custom setup command
#   - name: gcloud-auth
#     type: command
#     command: gcloud auth application-default login
#     check: gcloud auth application-default print-access-token
#     optional: true
