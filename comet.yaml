stacks_dir: stacks
work_dir: stacks/_components
generate_backend: false

# Environment variables (plain values only, fast)
# Shell environment takes precedence
# env:
#   TF_LOG: DEBUG
#   AWS_REGION: us-west-2

# Bootstrap: One-time setup for secrets and dependencies
# Run 'comet bootstrap' to fetch and cache locally
# This makes all subsequent comet commands fast!
#
# bootstrap:
#   - name: sops-age-key
#     type: secret
#     source: op://vault/infrastructure/sops-age-key  # Your 1Password path
#     # target is optional - automatically uses platform-specific SOPS age key location:
#     #   macOS (default):    ~/Library/Application Support/sops/age/keys.txt
#     #   macOS (w/ XDG):     $XDG_CONFIG_HOME/sops/age/keys.txt
#     #   Linux:              ~/.config/sops/age/keys.txt
#     # target: ~/.config/sops/age/keys.txt  # Or specify a custom path
#     mode: "0600"
#
#   # Note: For SOPS age keys, if you omit 'target', bootstrap automatically
#   # detects it's a SOPS age key (based on source name containing 'sops' and 'age')
#   # and uses the correct platform-specific default path.
#
#   # Optional: Check required tools
#   - name: check-tools
#     type: check
#     command: op,sops,tofu  # Comma-separated binary names
#
#   # Optional: Run custom setup command
#   - name: gcloud-auth
#     type: command
#     command: gcloud auth application-default login
#     check: gcloud auth application-default print-access-token
#     optional: true
